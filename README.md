Implements a base64 decode function with extensive error reporting.